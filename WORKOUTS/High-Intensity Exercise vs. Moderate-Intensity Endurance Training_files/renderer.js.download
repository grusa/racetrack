!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(13);function i(t,n,o){return e.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}},i(t,n,o||t)}e.exports=i},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(9);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(14),i=n(6);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(18),i=n(19),o=n(20),a=n(22);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(12);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(0<=t.indexOf(n))&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t,n){var r=n(0),i=n(9),o=n(15),a=n(16);function c(t){var n="function"==typeof Map?new Map:void 0;return e.exports=c=function(e){function t(){return a(e,arguments,r(this).constructor)}if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},c(t)}e.exports=c},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}},function(e,t,n){var r=n(0);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){var r=n(9),i=n(17);function o(){return e.exports=o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}e.exports=o},function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}}},function(e,t,n){var r=n(21);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);var r=n(10),i=n.n(r),o=n(7),a=n.n(o),c=n(2),u=n.n(c),s=n(3),l=n.n(s),d=n(1),f=n.n(d),h=n(4),p=n.n(h),y=n(5),v=n.n(y),m=n(0),b=n.n(m),w=n(6),g=n.n(w),k=n(11),E=n.n(k),S=Object({JAM_URL:"https://jam.hearstapps.com",RUFUS_URL:"https://preferencecenter.hearstmags.com",IDLE_TIME:"180",TODAYS_REWARDS_URL:"https://www.todays-rewards.com"}),j=S.JAM_URL,O=S.RUFUS_URL,C=void 0===O?"":O,x=S.TODAYS_REWARDS_URL,_=void 0===x?"":x,T={collapseScrollThreshold:100,daysToExpireHiddenCookie:365,daysToExpirePaywallView:30,daysToExpireViewsCookie:365,daysToHideNewsletter:365,daysToHideTodaysRewards:30,hiddenCookieName:"journeyHidden",hiddenCookieTemplates:["journey-inline-newsletter","journey-modal-newsletter","journey-inline-todays-rewards"],idleTime:Number.parseInt("180",10),inViewThreshold:.2,jamUrl:j,rufusUrl:"".concat(C.replace(/\/$/,""),"/api/preference/signup"),sailthruUrl:"https://api.sail-track.com/v1/track/user/signup",todaysRewardsUrl:"".concat(_.replace(/\/$/,""),"/"),viewsCookieName:"journeyViews"},R=function(e,t,n){if(!e||!t)return e;var r=encodeURIComponent(t),i=n?"=".concat(encodeURIComponent(n)):"";return"".concat(e).concat(e.includes("?")?"&":"?").concat(r).concat(i)};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?P(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):P(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var A=function(e){function t(){var e;return u()(this,t),(e=n.call(this)).shadow=e.attachShadow({mode:"open"}),e.renderContent=e.renderContent.bind(g()(e)),e.dispatchJourneyClickedEvent=e.dispatchJourneyClickedEvent.bind(g()(e)),e}p()(t,e);var n=I(t);return l()(t,[{key:"attachInViewObserver",value:function(){var e=this;new IntersectionObserver((function(t,n){t[0].isIntersecting&&(n.disconnect(),window.dispatchEvent(new CustomEvent("journey-inview",{detail:e.journeyEventData})))}),{threshold:T.inViewThreshold}).observe(this)}},{key:"addQueryParamToOfferLinks",value:function(){var e=this;this.shadow.querySelectorAll('a[href]:not([href=""]):not([href^="#"])').forEach((function(t){return"journey-inline-todays-rewards"===e.templateType?void(t.href=R(t.href,"r",window.location.origin)):void(t.href=R(t.href,"mrefurl",window.location.pathname))}))}},{key:"connectedCallback",value:function(){this.fetchTemplateData().then(this.renderContent)}},{key:"fetchTemplateData",value:function(){var e=this.getTemplateUrl();return e?fetch(e).then((function(e){return e.ok?e.text():Promise.resolve(null)})):Promise.resolve(null)}},{key:"dispatchJourneyDisplayedEvent",value:function(){var e=this.journeyEventData;window.dispatchEvent(new CustomEvent("journey-displayed",{detail:e}))}},{key:"dispatchJourneyClickedEvent",value:function(e){var t=e.currentTarget.getAttribute("data-link-type"),n=D(D({},this.journeyEventData),{},{linkType:t});window.dispatchEvent(new CustomEvent("journey-clicked",{detail:n}))}},{key:"getAuthUrl",value:function(e){return"".concat(window.location.origin,"/auth/csrf?action=").concat(e,"&return_url=").concat(window.location.href)}},{key:"getTemplateUrl",value:function(){var e=this.brand,t=this.templateId,n=this.viewsRemaining;if(!t)return null;var r="".concat("https://jam.hearstapps.com","/").concat(e,"/templates/").concat(t);return n?R(r,"viewsRemaining",n):r}},{key:"preventStickyVideo",value:function(){var e=this.targetSelector,t=this.displayMode;"#journey-container"===e&&"inline"===t&&(window.pianoOfferDisplayed=!0,window.journeyOfferDisplayed=!0)}},{key:"renderContent",value:function(e){var t=this;if(e){var n=(new DOMParser).parseFromString(e,"text/html").documentElement;this.shadow.appendChild(n),this.addQueryParamToOfferLinks(),this.updateAuthUrls(),this.attachInViewObserver(),this.dispatchJourneyDisplayedEvent(),this.preventStickyVideo(),this.links.forEach((function(e){e.addEventListener("click",t.dispatchJourneyClickedEvent)}))}}},{key:"updateAuthUrls",value:function(){var e=this,t=this.isSignedIn;this.shadow.querySelectorAll("a[data-link-type='login']").forEach((function(n){return t?void n.parentNode.removeChild(n):void(n.href=e.getAuthUrl("login"))})),this.shadow.querySelectorAll("a[data-link-type='signup']").forEach((function(t){t.href=e.getAuthUrl("signup")}))}},{key:"brand",get:function(){return this.getAttribute("data-brand")}},{key:"collapsed",get:function(){return"true"===this.getAttribute("data-collapsed")}},{key:"data",get:function(){if(!this._data){var e=this.shadow.querySelector("#journey-datalayer");this._data=e?JSON.parse(e.innerHTML):{}}return this._data}},{key:"displayMode",get:function(){return"inline"}},{key:"isSignedIn",get:function(){return"true"===this.getAttribute("data-is-signed-in")}},{key:"journeyEventData",get:function(){var e=this.templateId,t=this.templateType,n=this.displayMode,r=this.data,i=this.view,o=D({templateType:t,displayMode:n},r);return e&&(o.templateId=e),i&&(o.view=i),o}},{key:"links",get:function(){return this._links||(this._links=this.shadow.querySelectorAll("[data-link-type]")),this._links}},{key:"view",get:function(){var e=Number.isNaN,t=(0,Number.parseInt)(this.getAttribute("data-view"),10);return e(t)?null:t}},{key:"viewsRemaining",get:function(){return this.getAttribute("data-views-remaining")}},{key:"targetSelector",get:function(){return this.getAttribute("data-target-selector")}},{key:"templateId",get:function(){return this.getAttribute("data-template-id")}},{key:"templateType",get:function(){return"journey-template"}}]),t}(E()(HTMLElement));function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var B=function(e){function t(){return u()(this,t),n.apply(this,arguments)}p()(t,e);var n=L(t);return l()(t,[{key:"connectedCallback",value:function(){f()(b()(t.prototype),"connectedCallback",this).call(this),window.dispatchEvent(new CustomEvent("journey-blur-content"))}},{key:"templateType",get:function(){return"journey-blocker"}}]),t}(A),U=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=null;return function(r){clearTimeout(n),n=setTimeout((function(){return e(r)}),t)}};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var q=function(e){function t(){return u()(this,t),n.apply(this,arguments)}p()(t,e);var n=M(t);return l()(t,[{key:"attachCollapseOnScrollEvent",value:function(){var e=this,t=document.documentElement.scrollTop,n=U((function(){(0,Math.abs)(document.documentElement.scrollTop-t)<T.collapseScrollThreshold||(e.collapseContent(),window.removeEventListener("scroll",n))}));window.addEventListener("scroll",n)}},{key:"attachUserScrollEvent",value:function(){var e=this,t=["ArrowUp","ArrowDown","Space","Home","End","PageUp","PageDown"],n=U((function(r){var i=r.key;i&&!t.includes(i)||(window.removeEventListener("wheel",n),window.removeEventListener("touchmove",n),window.removeEventListener("keydown",n),e.attachCollapseOnScrollEvent())}));window.addEventListener("wheel",n,{once:!0}),window.addEventListener("touchmove",n,{once:!0}),window.addEventListener("keydown",n)}},{key:"toggleCollapse",value:function(e){var t=this.templateOuterWrapper;t.classList.toggle("collapsed",e),t.classList.toggle("expanded",!e)}},{key:"setHeight",value:function(){var e=this.templateOuterWrapper,t=this.isExpanded;e.style.maxHeight="".concat(t?this.expandedSection.offsetHeight:this.collapsedSection.offsetHeight,"px")}},{key:"collapseContent",value:function(){this.toggleCollapse(!0),this.setHeight()}},{key:"expandContent",value:function(){this.toggleCollapse(!1),this.setHeight()}},{key:"renderContent",value:function(e){if(!e)return null;f()(b()(t.prototype),"renderContent",this).call(this,e);var n=this.collapseButton,r=this.expandButton,i=this.collapsed,o=this.isExpanded;return n.addEventListener("click",this.collapseContent.bind(this)),r.addEventListener("click",this.expandContent.bind(this)),this.attachUserScrollEvent(),o&&!i?this.expandContent():this.collapseContent()}},{key:"collapseButton",get:function(){return this._collapseButton||(this._collapseButton=this.shadow.querySelector("#collapse-btn")),this._collapseButton}},{key:"collapsedSection",get:function(){return this._collapsedSection||(this._collapsedSection=this.shadow.querySelector(".collapsed-section")),this._collapsedSection}},{key:"expandButton",get:function(){return this._expandButton||(this._expandButton=this.shadow.querySelector("#expand-btn")),this._expandButton}},{key:"expandedSection",get:function(){return this._expandedSection||(this._expandedSection=this.shadow.querySelector(".expanded-section")),this._expandedSection}},{key:"isExpanded",get:function(){return this.templateOuterWrapper.classList.contains("expanded")}},{key:"templateOuterWrapper",get:function(){return this._templateOuterWrapper||(this._templateOuterWrapper=this.shadow.querySelector(".template-outer-wrapper")),this._templateOuterWrapper}},{key:"templateType",get:function(){return"journey-collapsible-meter"}}]),t}(A);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var H=function(e){function t(){var e;return u()(this,t),(e=n.call(this)).connectedCallBackCalled=!1,e}p()(t,e);var n=N(t);return l()(t,[{key:"connectedCallback",value:function(){if(!this.connectedCallBackCalled){f()(b()(t.prototype),"connectedCallback",this).call(this),this.connectedCallBackCalled=!0;var e=this.targetSelector;window.dispatchEvent(new CustomEvent("journey-hide-content",{detail:{targetSelector:e}}))}}},{key:"templateType",get:function(){return"journey-content-gate"}}]),t}(A),V=n(8),J=n.n(V),F=function(e){if(!document.cookie.length)return null;var t=document.cookie.split(";").find((function(t){return 0===t.trim().indexOf(e)}));return t?JSON.parse(t.split("=")[1]):null},Y=function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(JSON.stringify(t),";expires=").concat(r.toUTCString(),";path=/")},W=function(e){return e&&Object.keys(e).length?void Y(T.hiddenCookieName,e,T.daysToExpireHiddenCookie):void Y(T.hiddenCookieName,null,0)},z=function(){var e=F(T.hiddenCookieName);if(!e)return null;var t=!1,n=(new Date).getTime(),r=Object.entries(e).reduce((function(e,r){var i=J()(r,2),o=i[0],a=i[1];return a>n?e[o]=a:t=!0,e}),{});return t&&W(r),r},Z=function(e){var t=z();return t&&!!t[e]},$=function(e,t){var n=z()||{};n[e]=(new Date).getTime()+24*t*60*60*1e3,W(n)},Q=function(e,t,n){return new Promise((function(r,i){var o="modal"===n?"MODAL":"INLINE";return fetch(T.rufusUrl,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,preferences:[{preferenceId:t,optinValue:"H"}],analyticString1:"",analyticString2:"",majorSource:"WNL",minorSource:o})}).then((function(e){return e.ok?r(e):i(e.message)})).catch(i)}))},K=function(e,t,n,r,i){return new Promise((function(o,c){var u="modal"===i?"MODAL":"INLINE",s={email:e,lists:a()({},n,1),vars:{minor_src:u,major_src:"WNL"},template:{name:r}};return fetch(T.sailthruUrl,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.ok?o(e):c(e.message)})).catch(c)}))};function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var X=function(e){function t(){var e;return u()(this,t),(e=n.call(this)).handleSubmit=e.handleSubmit.bind(g()(e)),e.handleFocusIn=e.handleFocusIn.bind(g()(e)),e.visitorEmailCaptured=e.visitorEmailCaptured.bind(g()(e)),e}p()(t,e);var n=G(t);return l()(t,[{key:"dispatchJourneySubmittedEvent",value:function(){var e=this.journeyEventData;window.dispatchEvent(new CustomEvent("journey-submitted",{detail:e}))}},{key:"handleFocusIn",value:function(){}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.emailInput.value;return t=t&&t.trim(),/^[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/.test(t)?this.subscribeEmail(t):this.visitorSubmittedInvalidEmail()}},{key:"renderContent",value:function(e){e&&(f()(b()(t.prototype),"renderContent",this).call(this,e),this.submitButton.addEventListener("click",this.handleSubmit),this.emailInput.addEventListener("focusin",this.handleFocusIn))}},{key:"subscribeEmail",value:function(e){var t=this.data,n=t.authId,r=(t.campaignName,t.sailthruId),i=t.sailthruList,o=t.sailthruTemplate;Q(e,n,this.displayMode).then(this.visitorEmailCaptured),K(e,r,i,o,this.displayMode)}},{key:"visitorEmailCaptured",value:function(){this.dispatchJourneySubmittedEvent(),$(this.templateId,T.daysToHideNewsletter)}},{key:"visitorSubmittedInvalidEmail",value:function(){}},{key:"emailInput",get:function(){return this._emailInput||(this._emailInput=this.shadow.querySelector(".input-email")),this._emailInput}},{key:"submitButton",get:function(){return this._submitButton||(this._submitButton=this.shadow.querySelector("#submit-button")),this._submitButton}},{key:"templateType",get:function(){return"journey-newsletter"}}]),t}(A);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var te=function(e){function t(){return u()(this,t),n.apply(this,arguments)}p()(t,e);var n=ee(t);return l()(t,[{key:"handleFocusIn",value:function(){this.mainSection.classList.remove("error")}},{key:"visitorEmailCaptured",value:function(){var e=this.mainSection,n=this.thankYouContainer;e.style.display="none",n.style.display="block",f()(b()(t.prototype),"visitorEmailCaptured",this).call(this)}},{key:"visitorSubmittedInvalidEmail",value:function(){f()(b()(t.prototype),"visitorSubmittedInvalidEmail",this).call(this),this.mainSection.classList.add("error")}},{key:"mainSection",get:function(){return this._mainSection||(this._mainSection=this.shadow.querySelector(".main-section")),this._mainSection}},{key:"thankYouContainer",get:function(){return this._thankYouContainer||(this._thankYouContainer=this.shadow.querySelector(".thank-you-container")),this._thankYouContainer}},{key:"templateType",get:function(){return"journey-inline-newsletter"}}]),t}(X);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var re=function(e){function t(){var e;return u()(this,t),(e=n.call(this)).handleCancel=e.handleCancel.bind(g()(e)),e.handleVisitSite=e.handleVisitSite.bind(g()(e)),e}p()(t,e);var n=ne(t);return l()(t,[{key:"handleCancel",value:function(){$(this.templateId,T.daysToHideTodaysRewards),this.parentNode.removeChild(this)}},{key:"handleVisitSite",value:function(){var e=this.mainSection,t=this.thankYouContainer;e.style.display="none",t.style.display="block"}},{key:"renderContent",value:function(e){e&&(f()(b()(t.prototype),"renderContent",this).call(this,e),this.visitSiteButton.addEventListener("click",this.handleVisitSite),this.cancelButton.addEventListener("click",this.handleCancel))}},{key:"cancelButton",get:function(){return this._cancelButton||(this._cancelButton=this.shadow.querySelector(".cancel-btn")),this._cancelButton}},{key:"mainSection",get:function(){return this._mainSection||(this._mainSection=this.shadow.querySelector(".main-section")),this._mainSection}},{key:"templateType",get:function(){return"journey-inline-todays-rewards"}},{key:"thankYouContainer",get:function(){return this._thankYouContainer||(this._thankYouContainer=this.shadow.querySelector(".thank-you-container")),this._thankYouContainer}},{key:"visitSiteButton",get:function(){return this._visitSiteButton||(this._visitSiteButton=this.shadow.querySelector(".redirect-btn")),this._visitSiteButton}}]),t}(A);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b()(e);if(t){var i=b()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return v()(this,n)}}var oe=["scroll","keydown","visibilitychange"],ae=oe.concat(["mousedown","mousemove","touchstart","touchmove"]),ce=oe.concat(["pointerdown","pointermove"]),ue=function(e){function t(){var e;return u()(this,t),(e=n.call(this)).open=e.open.bind(g()(e)),e.close=e.close.bind(g()(e)),e.keydownEventHandler=e.keydownEventHandler.bind(g()(e)),e.resetIdleTimer=U(e.open,1e3*T.idleTime),e}p()(t,e);var n=ie(t);return l()(t,[{key:"attachInViewObserver",value:function(){}},{key:"close",value:function(){this.ariaHidden=!0,this.lastActiveElement&&this.lastActiveElement.focus(),document.removeEventListener("keydown",this.keydownEventHandler),window.dispatchEvent(new CustomEvent("journey-modal-close",{detail:this.journeyEventData}))}},{key:"handleFocusIn",value:function(){f()(b()(t.prototype),"handleFocusIn",this).call(this),this.errorMessage.style.display="none"}},{key:"keydownEventHandler",value:function(e){if("Escape"!==e.key){if("Tab"===e.key){var t=this.focusable,n=t[0],r=t[t.length-1];e.shiftKey&&this.shadow.activeElement===n?(r.focus(),e.preventDefault()):this.shadow.activeElement===r&&(n.focus(),e.preventDefault())}}else this.close()}},{key:"open",value:function(){this.lastActiveElement=document.activeElement,this.unbindActivityEvents(),this.ariaHidden=!1,this.emailInput.focus(),document.addEventListener("keydown",this.keydownEventHandler),window.dispatchEvent(new CustomEvent("journey-inview",{detail:this.journeyEventData})),window.dispatchEvent(new CustomEvent("journey-modal-open",{detail:this.journeyEventData}))}},{key:"renderContent",value:function(e){e&&(f()(b()(t.prototype),"renderContent",this).call(this,e),this.cancelButton.addEventListener("click",this.close),this.closeButton.addEventListener("click",this.close),this.overlay.addEventListener("click",this.close),this.startIdleTimer())}},{key:"startIdleTimer",value:function(){var e=this;this.activityEvents.forEach((function(t){return document.addEventListener(t,e.resetIdleTimer,{capture:!0,passive:!0})})),this.resetIdleTimer()}},{key:"unbindActivityEvents",value:function(){var e=this;this.activityEvents.forEach((function(t){return document.removeEventListener(t,e.resetIdleTimer,{capture:!0,passive:!0})}))}},{key:"visitorEmailCaptured",value:function(){this.close(),f()(b()(t.prototype),"visitorEmailCaptured",this).call(this)}},{key:"visitorSubmittedInvalidEmail",value:function(){f()(b()(t.prototype),"visitorSubmittedInvalidEmail",this).call(this),this.errorMessage.style.display="block"}},{key:"activityEvents",get:function(){return window.PointerEvent?ce:ae}},{key:"ariaHidden",set:function(e){return e?void this.setAttribute("aria-hidden",!0):void this.removeAttribute("aria-hidden")}},{key:"cancelButton",get:function(){return this._cancelButton||(this._cancelButton=this.shadow.querySelector("#cancel-button")),this._cancelButton}},{key:"closeButton",get:function(){return this._closeButton||(this._closeButton=this.shadow.querySelector(".modal-close")),this._closeButton}},{key:"displayMode",get:function(){return"modal"}},{key:"errorMessage",get:function(){return this._errorMessage||(this._errorMessage=this.shadow.querySelector(".error-message")),this._errorMessage}},{key:"focusable",get:function(){return this._focusable||(this._focusable=Array.from(this.shadow.querySelectorAll('a[href], input:not([disabled]), button:not([disabled]), [tabindex="0"]'))),this._focusable}},{key:"overlay",get:function(){return this._overlay||(this._overlay=this.shadow.querySelector(".modal-overlay")),this._overlay}},{key:"templateType",get:function(){return"journey-modal-newsletter"}}]),t}(X);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?se(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):se(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}var de=function(){var e=F(T.viewsCookieName);if(!e)return null;var t={},n=(new Date).getTime();return Object.entries(e).forEach((function(e){var r=J()(e,2),i=r[0],o=r[1];o.expiryDate<n||(t[i]=o)})),t},fe=function(e,t){var n=Math.min,r=window.HRST.article.universalID,i=de();if(!i||!i[e]){var o=le(le({},i),{},a()({},e,{articles:[r],expiryDate:(new Date).getTime()+24*T.daysToExpirePaywallView*60*60*1e3}));return Y(T.viewsCookieName,o,T.daysToExpireViewsCookie),1}var c=i[e].articles,u=c.length;return c.includes(r)||((!t||u<t)&&c.push(r),u+=1),Y(T.viewsCookieName,i,T.daysToExpireViewsCookie),n(u,t+1)};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}customElements.define("journey-template",A),customElements.define("journey-content-gate",H),customElements.define("journey-blocker",B),customElements.define("journey-collapsible-meter",q),customElements.define("journey-inline-newsletter",te),customElements.define("journey-modal-newsletter",ue),customElements.define("journey-inline-todays-rewards",re);var pe=function(e){var t=document.querySelector(e);if(t){!function(e){var t=document.createElement("style");t.innerHTML="\n  .journey-gate-hide {\n    position: relative;\n    clear:both;\n    margin-left: -0.938rem;\n    margin-right: -0.938rem;\n  }\n\n  .journey-gate-hide:before {\n    background:linear-gradient(rgba(255,255,255,0), #fff);\n    content:'';\n    height:10rem;\n    left:0;\n    pointer-events: none;\n    position:absolute;\n    top:-10rem;\n    width:100%;\n  }\n\n  .journey-gate-hide ~ * {\n    display: none !important;\n  }\n\n  @media (min-width: 48rem) {\n    .journey-gate-hide{\n       margin-left: 0;\n       margin-right:0;\n    }\n  }\n\n  ".concat(e," {\n    clear: both;\n    text-align: center;\n  }\n  "),document.body.appendChild(t)}(e);var n=document.createElement("div");n.classList.add("journey-gate-hide"),t.before(n);var r=document.querySelector(".content-container");r&&r.appendChild(t)}},ye=function(e,t,n){n.forEach((function(n){var r=n,i=r.templateId,o=r.templateType,c=r.targetSelector,u=r.paywallId,s=r.maxPageViews,l=r.templates,d=document.querySelector(c);if(!(!d||T.hiddenCookieTemplates.includes(o)&&Z(i))){if(u&&s&&l){var f=fe(u,s),h=l.find((function(e){var t=e.pageViews;return[].concat(t).includes(f)}));n=function(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?he(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}({view:f,targetSelector:c,viewsRemaining:s>f?s-f:0},h)}var p=function(e,t,n){var r=Number.isInteger,i=n.templateId,o=n.templateType,a=n.targetSelector,c=n.view,u=n.viewsRemaining,s=n.collapsed;if(!o||!i)return null;var l=document.createElement(o);return l.setAttribute("data-brand",e),l.setAttribute("data-is-signed-in",t),l.setAttribute("data-target-selector",a),l.setAttribute("data-template-id",i),r(c)&&l.setAttribute("data-view",c),s&&l.setAttribute("data-collapsed",s),r(u)&&l.setAttribute("data-views-remaining",u),"journey-modal-newsletter"===o&&l.setAttribute("aria-hidden",!0),l}(e,t,n);p&&("journey-modal-newsletter"===o&&(d=document.body),d.appendChild(p))}}))},ve=function(e){e.on("playing",e.pause),e.on("ads-ad-started",(function(){e.ima.pauseAd(),e.ima.addEventListener("resume",e.ima.pauseAd)}))};window.addEventListener("journey-init",(function(e){var t=e.detail,n=t.brand,r=i()(t,["brand"]);n&&function(e,t){return fetch("".concat(T.jamUrl,"/").concat(e,"/rules/match?").concat(new URLSearchParams(t).toString()))}(n,r).then((function(e){e.ok&&e.json().then((function(e){var t=e.data;t&&ye(n,r.signedIn,t)}))}))})),window.addEventListener("journey-hide-content",(function(e){var t=e.detail;pe(t.targetSelector)})),window.addEventListener("journey-blur-content",(function(){!function(){var e=document.createElement("style");e.innerHTML="\n  .article-container>.article-body>*:not(.breaker-ad):not(.vertical-ad),\n  .authors,\n  .listicle-body>.content-lede-image,\n  .listicle-body-content>.listicle-slide,\n  .listicle-intro,\n  .recipe-container>.recipe-body>*:not(.breaker-ad):not(.vertical-ad):not(.recipe-lede-video),\n  .slideshow-slide,\n  .slideshow-inner>.slideshow-lede>*:not(.breaker-ad):not(.vertical-ad),\n  .standard-body>.content-lede-image,\n  .standard-body>.standard-body-content>*:not(.breaker-ad):not(.vertical-ad):not(.end-of-content-playlist),\n  .watch-next-in-body {\n    filter: blur(0.625rem);\n    pointer-events: none !important;\n    user-select: none !important;\n  }\n",document.body.appendChild(e)}();var e=document.querySelector(".watch-next-in-body, .embed-video"),t=document.querySelector(".standard-body-content, .listicle-body-content, .longform-body, .recipe-body");t&&e&&function(e){window.addEventListener("newHearstPlayerInit",(function(t){var n=t.detail,r=(n=void 0===n?{}:n).player,i=void 0===r?{}:r;i.el&&e.contains(i.el())&&ve(i)})),e.querySelectorAll("video[id*='hearstPlayer']").forEach((function(e){var t=videojs.getPlayer(e.id);ve(t)}))}(t)})),window.addEventListener("journey-modal-open",(function(){document.body.classList.add("no-scroll")})),window.addEventListener("journey-modal-close",(function(){var e=document.querySelector("#sidepanel");e&&"true"!==e.getAttribute("aria-hidden")||document.body.classList.remove("no-scroll")}))}]);