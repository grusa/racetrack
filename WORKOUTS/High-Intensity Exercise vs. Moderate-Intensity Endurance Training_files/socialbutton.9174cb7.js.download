(window.webpackJsonp=window.webpackJsonp||[]).push([["modules/socialbutton"],{"3fa093cc200ca8461dee":function(t,r,s){"use strict";s.r(r),function(t,h,g){var a=s("7ec90be294f8945e7663"),n=s("a2b997b8b278a0820277"),e=s("05106bc5084d72d8462e"),i=s("891a19eb7d3552f95f46"),o=s("114e6051b0f5f7c39077"),d=s("654adc4d2d3e5dbaee18");r.default=t.View.extend({el:".social-share-button .social-button-link",fb:null,events:{click:"onSocialButtonClicked"},initialize:function(){this.setVariables(),this.$fbShareButton.length&&!this.GDPR&&Object(d.w)(this.initFB.bind(this)),this.$fbShareButton.length&&this.GDPR&&this.GDPRConsentCookie&&(Object(d.w)(this.initFB.bind(this)),this.$fbShareButton.removeClass("gdpr-requires-consent")),this.overrideDefaults({popupWindowWidth:575,popupWindowHeight:240})},setVariables:function(){this.overrideDefaults({tracker:null}),this.GDPR=window.GDPR,this.$fbShareButton=this.$el.closest(".social-button-facebook"),this.GDPRConsentCookie=window.GDPR_CONSENT,this.logger=new i.a("SocialButton")},initFB:function(){(new e.a).loadFacebookSDK(this.onFacebookSDKLoaded.bind(this))},onSocialButtonClicked:function(t){var e,i,a,n=h(t.currentTarget),o=n.data("social-key"),r=n.attr("href"),s="",c=(window.outerWidth-this.popupWindowWidth)/2,l=(window.outerHeight-this.popupWindowHeight)/2;if(this.trackEnsighten(o,n),"email"!==o)if(t.preventDefault(),"print"!==o){if(this.track("click",o),"facebook"===o&&(e=Object(d.h)(r)).app_id&&e.link&&this.fb)return i=g.extend({method:"feed",display:"popup"},g.mapObject(g.pick(e,"link","app_id","picture","redirect_uri","name","description"),function(t){return decodeURIComponent(t)})),void this.fb.ui(i,this.track.bind(this,"share",o));"twitter"===o&&(a={left:window.screenX+c,top:window.screenY+l,width:this.popupWindowWidth,height:this.popupWindowHeight,resizable:1,scrollbars:1,status:1},s=h.map(a,function(t,e){return e+"="+t}).join(",")),window.open(r,"_blank",s)}else window.print()},onFacebookSDKLoaded:function(t){this.fb=t},track:function(t,e){var i;this.tracker instanceof n.a?(i=t.toUpperCase()+"_"+e.toUpperCase(),Object.prototype.hasOwnProperty.call(this.tracker.signals,i)?this.tracker.track(this.tracker.signals[i]):this.logger.log("Invalid signal sent to EngagementTracker: ",i)):this.logger.log("SocialButton doesn't have an EngagementTracker configured.")},trackEnsighten:function(t,e){var i={networkName:t,articleId:a.a.getValue("content.id",""),articleUrl:a.a.getValue("canonicalUrl",""),articleTitle:a.a.getValue("content.title",""),shareLocation:e.closest("[data-share-location]").data("share-location")};o.a.trigger("share."+t,i)}})}.call(this,s("292bef011bf0a540c727"),s("4124695a4a0df23fd56c"),s("37047f07c1f267630157"))},a2b997b8b278a0820277:function(t,o,r){"use strict";(function(t,a){var i=r("8d0684f10c3cea737a13"),e=r("891a19eb7d3552f95f46"),n=r("654adc4d2d3e5dbaee18");o.a=t.View.extend({signals:{CLICK_PROMO:"click,promo",LOAD_PROMO:"load,promo",VIEW_PROMO:"view,promo",LOAD_PAGE:"load,page",ENGAGE_PAGE:"engage,page",SCROLL_PAGE:"scroll,page",SHARE_FACEBOOK:"share,page,fb",SHARE_TWITTER:"share,page,twitter",SHARE_PINTEREST:"share,page,pinterest",CLICK_FACEBOOK:"click_share,page,fb",CLICK_TWITTER:"click_share,page,twtr",CLICK_PINTEREST:"click_share,page,pntrst"},timer:null,timeEngaged:null,initialize:function(){this.setVariables()},setVariables:function(){this.overrideDefaults({url:window.BABOU_URL||"",endpoint:"/t",engagementEvents:["focus","click","scroll","mousemove","touchstart","touchend","touchcancel","touchleave","touchmove"],engagementTimeout:5e3,params:{_i:"",_v:"",_t:"",pub:window.VARIANT_PUB||""},scrollDepth:.25,trackScrollDepth:!1}),this.logger=new e.a("EngagementTracker"),this.trackScrollDepth&&this.$el.length&&(this.$scrollDepthTarget=this.getScrollDepthTarget())},start:function(){var e=a(window);this.engagementEvents.forEach(function(t){e.on(t+".engagement",this.handleEngagement.bind(this))}.bind(this)),this.trackScrollDepth&&0<this.$scrollDepthTarget.length&&i.a.on("scroll",this.handleScroll.bind(this),"tracker"),this.track(this.signals.LOAD_PAGE),this.logger.log("Tracking engagements")},track:function(t,e,i){if(i=Object(n.e)(i),!this.url)return this.logger.log("No url configured for EngagementTracker."),void i({error:"No url configured."});a.ajax({url:this.url+this.endpoint,data:this.formParams(t,e),method:"POST"}).done(i).fail(this.handleTrackError.bind(this,i))},trackEngagementTime:function(){var t=(new Date).getTime()-this.timeEngaged-this.engagementTimeout;this.timeEngaged=null,this.track(this.signals.ENGAGE_PAGE,t),this.logger.log("Time Engaged: ",t)},handleEngagement:function(){clearTimeout(this.timer),null===this.timeEngaged&&(this.timeEngaged=(new Date).getTime()),this.timer=setTimeout(this.trackEngagementTime.bind(this),this.engagementTimeout)},handleScroll:function(t){var e=this.$scrollDepthTarget.offset();Object.prototype.hasOwnProperty.call(e,"top")&&e.top<=t&&(i.a.off("scroll","tracker"),this.track(this.signals.SCROLL_PAGE))},handleTrackError:function(t,e,i){this.logger.log("Tracking error",e,i),t({error:i})},getScrollDepthTarget:function(){var t=this.$el.children(),e=t.length,i=e<2?e:Math.max(2,Math.ceil(e*this.scrollDepth));return t.eq(i-1)},formParams:function(t,e){return a.extend({},this.params,{_t:t,_v:e})}})}).call(this,r("292bef011bf0a540c727"),r("4124695a4a0df23fd56c"))}}]);
//# sourceMappingURL=socialbutton.9174cb7.js.map