window.Ads=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function i(e){for(var t=Object(e),n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach(function(e){null!=e&&Object.keys(e).forEach(function(n){t[n]=e[n]})}),t}function r(){var e,t=window.innerWidth;return Object.keys(o).forEach(function(n){o[n]<=t&&(e=n)}),e}function a(){return window.location.search}function l(e,t){var n=1<arguments.length&&void 0!==t?t:"";try{var i=new URL(a());return i.searchParams.get(e)?i.searchParams.get(e):n}catch(t){var r=new RegExp("[&?]".concat(e,"=?([^&]*)?")).exec(a());return null===r?n:void 0===r[1]||r[1]}}function s(){return"authorized"===function(e,t){var n=1<arguments.length&&void 0!==t?t:"",i=new RegExp("".concat(e,"=([^;]*)")).exec(document.cookie);return i instanceof Array&&1<i.length?i[1]:n}("mylo_status")}n.r(t);var o={m:0,t:760,d:980};function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e){return e.classList.contains("journey-gate")&&(G=!s()),G?0:"P"===e.nodeName?e.innerText.length:"DIV"===e.nodeName&&e.className.match(/embed/)?function(e){var t=e.getAttribute("data-align")||"center",n=e.getAttribute("data-size")||"medium",i=1,r=1;return"center"!==t&&(i=-1),"small"===n?r=.5:"large"===n&&(r=1.5),v*i*r}(e):0}function u(e,t,n){for(var i=0,r=t+1;r<e.length;r++)if(n<=(i+=e[r]))return!0;return!1}function m(e){return"DIV"===e.nodeName&&e.classList.contains("embed")}function p(e){return"P"===e.nodeName||m(e)||e.classList.contains("listicle-slide")||e.classList.contains("slideshow-slide")}function f(e){return e.classList.contains("journey-gate")&&(M=!s()),M?0:m(e)&&function(e){var t=e.nextElementSibling;if(t){var n=e.offsetTop+e.offsetHeight;if(t.offsetTop+t.offsetHeight<n)return!0}var i=window.getComputedStyle(e).getPropertyValue("float")||"";return"left"===i||"right"===i}(e)?-e.offsetHeight:e.offsetHeight}function h(e,t,n){var i=e.el,r=e.placement,a=e.gapPixels,l=e.gapElements,s=e.isFirstAds,o=t.ledeHeight,d=t.screenHeight,c=n.restAds;s&&(c=0===o?n.firstAds:n.firstAdsWithLede);var u=c,m=u.minGapMultiply,f=u.minGapAddition,h=u.minElements,y=u.minusLedeHeight,g=m*d+f;return g-=void 0!==y&&y?o:0,p(i)&&(0===r.after||g<=a&&h<=l)}function y(e,t,n){var i=e.index,r=t.elements,a=t.heights,l=t.screenHeight,s=n.requiredLeftSpace,o=a.reduce(function(e,t,n){return e+(i<n&&p(r[n])?t:0)},0);return s.multiply*l+s.addition<o}var g={},A=function(){function e(t){!function(t,n){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.placements=t,this.index=0,this.iteration=0}return function(e,t,n){t&&d(e.prototype,t),n&&d(e,n)}(e,[{key:"getNextPlacement",value:function(){for(var t=0;t<this.placements.length;t++){var n=i({},this.placements[this.index]),r=this.iteration;if(this.index+=1,this.index>=this.placements.length&&(this.index=0,this.iteration+=1),!(n.once&&0<r))return n.el=e.formElement(n,r),n.reserve=n.reserve||0,n}return null}}],[{key:"formElement",value:function(e){g[e.id]=g[e.id]||0;var t=document.createElement("div"),n=e.id.replace("{i}",g[e.id]++),i=document.getElementById(e.template),r=null===i?'<div id="{id}"></div>':i.innerText;return t.innerHTML=r.replace("{id}",n),t.firstElementChild}}]),e}(),v=350,G=!1,E=700,b=1500,x={"standard-body-content":{m:{firstAds:{minGapMultiply:0,minGapAddition:500,minElements:2},firstAdsWithLede:{minGapMultiply:0,minGapAddition:200,minElements:1},restAds:{minGapMultiply:1.25,minGapAddition:0,minElements:2},requiredLeftSpace:{multiply:1,addition:0}},d:{firstAds:{minGapMultiply:0,minGapAddition:b,minElements:2},firstAdsWithLede:{minGapMultiply:0,minGapAddition:b,minElements:1,minusLedeHeight:!0},restAds:{minGapMultiply:1,minGapAddition:E,minElements:2},requiredLeftSpace:{multiply:0,addition:E}}},"longform-body":{m:{firstAds:{minGapMultiply:0,minGapAddition:500,minElements:2},firstAdsWithLede:{minGapMultiply:0,minGapAddition:200,minElements:1},restAds:{minGapMultiply:1.25,minGapAddition:0,minElements:2},requiredLeftSpace:{multiply:1,addition:0}},d:{firstAds:{minGapMultiply:1,minGapAddition:0,minElements:2},firstAdsWithLede:{minGapMultiply:1,minGapAddition:0,minElements:2},restAds:{minGapMultiply:1,minGapAddition:0,minElements:2},requiredLeftSpace:{multiply:1,addition:0}}},"slide-container":{m:{firstAds:{minGapMultiply:0,minGapAddition:0,minElements:1},firstAdsWithLede:{minGapMultiply:1,minGapAddition:0,minElements:1},restAds:{minGapMultiply:1,minGapAddition:0,minElements:1},requiredLeftSpace:{multiply:1,addition:0}}},"listicle-body-content":{m:{firstAds:{minGapMultiply:0,minGapAddition:0,minElements:1},firstAdsWithLede:{minGapMultiply:1,minGapAddition:0,minElements:1},restAds:{minGapMultiply:1,minGapAddition:0,minElements:1},requiredLeftSpace:{multiply:1,addition:0}},d:{firstAds:{minGapMultiply:0,minGapAddition:b,minElements:1},firstAdsWithLede:{minGapMultiply:0,minGapAddition:b,minElements:1,minusLedeHeight:!0},restAds:{minGapMultiply:1,minGapAddition:E,minElements:1},requiredLeftSpace:{multiply:1,addition:0}}},"review-body-content":{m:{firstAds:{minGapMultiply:0,minGapAddition:500,minElements:2},firstAdsWithLede:{minGapMultiply:0,minGapAddition:200,minElements:1},restAds:{minGapMultiply:1.25,minGapAddition:0,minElements:2},requiredLeftSpace:{multiply:1,addition:0}},d:{firstAds:{minGapMultiply:0,minGapAddition:900,minElements:2},firstAdsWithLede:{minGapMultiply:0,minGapAddition:900,minElements:1},restAds:{minGapMultiply:1,minGapAddition:850,minElements:2},requiredLeftSpace:{multiply:0,addition:E}}}},L=Object.keys(x),M=!1,w=function(e,t){switch(e){case"character":return function(e,t){t.embedCharacterCount&&(v=t.embedCharacterCount);var n=[],i=e.map(function(e){return c(e)}),r=new A(t.placements),a=0,l=r.getNextPlacement();return i.forEach(function(e,t){for(a+=e;l&&a>=l.after&&u(i,t,l.reserve);)n.push({index:+t,placement:l}),a=0,l=r.getNextPlacement()}),n}(t.elements,t.config);case"screen":return function(e,t,n,i,a){var l=!(4<arguments.length&&void 0!==a)||a,s=[],o=new A(n.placements,i),d=t.map(function(e){return f(e)}),c=function(){var e=document.querySelector(".content-lede-image, .content-lede-loop, .content-lede-video, .header-media");return e?e.offsetHeight:0}(),u=window.innerHeight,m=n.targetConfig||function(e){var t={d:{},m:{}};return L.forEach(function(n){e.classList.contains(n)&&(t=x[n])}),e.classList.contains("slide-container")&&!e.classList.contains("new-tablet-disabled")&&!document.getElementsByTagName("html")[0].classList.contains("no-tablet")||"d"!==r()?t.m:t.d}(e),g={elements:t,heights:d,ledeHeight:c,screenHeight:u},v=o.getNextPlacement(),G=0,E=0,b=l;return b&&0!==c&&"d"!==r()&&e.classList.contains("slide-container")&&(s.push({index:-1,placement:v}),v=o.getNextPlacement(),b=!1),d.forEach(function(e,n){var i=t[n];G+=e,E+=p(i)&&0<e?1:0;for(var r={el:i,placement:v,gapPixels:G,gapElements:E,isFirstAds:b,index:n};h(r,g,m)&&y(r,g,m);)s.push({index:+n,placement:v}),E=G=0,b=!1,r={el:i,placement:v=o.getNextPlacement(),gapPixels:G,gapElements:E,isFirstAds:b,index:n}}),s}(t.container,t.elements,t.config,t.insertFirstAd);case"slide":return function(e,t,n){var i=[],r=e.length,a=new A(t.placements,n),l=a.getNextPlacement(),s=0;return"gallery"===t.type&&(i.push({index:-1,placement:l}),l=a.getNextPlacement()),e.forEach(function(e,t){for(s++;s>=l.after&&!(l.reserve>r-(t+1));)i.push({index:t,placement:l}),s=0,l=a.getNextPlacement()}),i}(t.elements,t.config,t.startIteration);default:return[]}};function P(e){return e instanceof HTMLElement}function S(e,t){return new Promise(function(n){requestAnimationFrame(function(){return n(e.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t)))})})}function j(e,t,n){return e.insertBefore(t,n)}function N(e,t){return e.appendChild(t)}function H(e,t,n,i){var r=e.container||document.querySelector(t),a=new RegExp("^arb","i"),s=a.exec(l("src"))||a.exec(l("utm_campaign")),o=s?"slide":"screen";o=e.method||o;var d=O,c=[].slice.call(document.querySelectorAll(n));if(c="gallery"!==e.type||s?c.slice(d):c.slice(d,d+32),i&&s)return Promise.reject();var u=w(o,{container:r,elements:c,config:e,insertFirstAd:!i});return q=[],u.forEach(function(e,t){var n=e.index+1,i=c[n];if(O=d+n,0!==t||-1!==e.index)if(i){var a=[r,e.placement.el,i];q.push(S(j,a))}else q.push(S(N,[r,e.placement.el]));else{if(r.previousSibling.className===e.placement.el.className)return;var l=[r.parentNode,e.placement.el,r];q.push(S(j,l))}}),Promise.all(q)}var q=[],O=0,T={insert:function(e,t){var n=1<arguments.length&&void 0!==t&&t;switch(e.type){case"article":return function(e){var t=e.selector||".article-body-content",n=e.container||document.querySelector(t);if(null===n)return Promise.reject(new Error("container does not exist"));var i=[].slice.call(n.childNodes).filter(P),r=e.calculateMethod||"screen",a=w(r,{container:n,elements:i,config:e});return q=[],a.forEach(function(e){var t=[n,e.placement.el,i[e.index+1]];q.push(S(j,t))}),Promise.all(q)}(e);case"listicle":return H(e,".listicle-body-content",".listicle-slide");case"gallery":return H(e,".slide-container",".slideshow-slide",n)}return Promise.resolve()}};t.default=T}]).default;
//# sourceMappingURL=ad-api.1.36.0.js.map